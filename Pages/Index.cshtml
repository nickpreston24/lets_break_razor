@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div x-data="setup()" class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>

    <div x-data="{ open: false }">

        <h1 class="text-accent text-lg">Alpinejs test</h1>

        <button class="btn btn-primary" x-text="open ?  'Close' :  'Expand' " x-on:click="open = !open"></button>

        <span x-show="open" class="grid grid-cols-2 h-64">
            <p class="text-primary">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab accusamus accusantium dolore dolorem dolores dolorum eius error et eveniet incidunt nam nemo praesentium quasi qui quisquam repellendus reprehenderit sed, tempora.</p>

            <p class="text-accent">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus aliquam consequuntur, culpa dicta, eligendi exercitationem illo laborum numquam obcaecati odio optio, pariatur perferendis placeat qui quia quod similique velit vitae!</p>

            <div>
                <h1 class="text-primary text-xl">SQL Test</h1>
                <div hx-get
                     hx-page="Index"
                     hx-page-handler="AllTodos"
                     hx-trigger="intersect">
                </div>
                @* hx-loader="#todos_indicator" *@

                @* <span id="todos_indicator" class="htmx-indicator"> *@
                @*     <label>loading ...</label> *@
                @*     <img class="w-8" alt="bars" src="~/img/loaders/circle_bars.svg"/> *@
                @* </span> *@

            </div>

        </span>

        <div>
            <h1 class="text-accent text-lg">dotenv load test</h1>
            <p>@Environment.GetEnvironmentVariable("foo")</p>
        </div>

        <div>
            <h1 class="text-accent text-lg">animejs test</h1>
            <div id="box_grid" class="grid grid-rows-1 grid-cols-1">

                <span class="w-10 box">
                    1
                </span>
                <span class="w-10 box">
                    2
                </span>
                <span class="w-10 box">
                    3
                </span>
            </div>
        </div>

    </div>

    <div
        hx-get
        hx-trigger="every 1s"
        hx-page="Index"
        hx-page-handler="Swap"
        class="btn btn-secondary">
        Swap me, baby one moar time!
    </div>


    <section class="h-screen ">
        <h1 class="text-primary text-xl">Test Schema fetching</h1>

        <div hx-get
             hx-page="Index"
             hx-page-handler="SchemaInsights"
             hx-trigger="intersect"
             hx-on::after-request="run_schema_card_animations()">
        </div>

    </section>

    <section class="h-screen">
        <h1 class="text-primary text-xl">Test fetching of local todo comments</h1>
        <div hx-get
             hx-page="Index"
             hx-page-handler="LocalTodoComments"
             hx-trigger="intersect">
        </div>
    </section>

</div>
<script type="text/javascript">
    console.log('shoop!')
    var elements = document.querySelectorAll('.box');
    
    anime({
      targets: '.box',
      translateX: 250,
      rotate: '1turn',
      backgroundColor: '#FFF',
      duration: 800
    });
    
    anime({
      targets: '.box',
      translateX: 250,
      scale: 2,
      rotate: '1turn'
    });
    
    function run_schema_card_animations() {
               
        anime({
          targets: '.card',
          scale: [
            {value: .1, easing: 'easeOutSine', duration: 50},
            {value: 1, easing: 'easeInOutQuad', duration: 500}
          ],
          delay: anime.stagger(200, {grid: [14, 5], from: 'center'})
        });
    }
    
    function setup() {
        return {
            
           
            
        }
    }
</script>